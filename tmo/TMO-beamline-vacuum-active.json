{
  "version": 0,
  "root": {
    "name": "TMO-beamline-vacuum-active ",
    "description": null,
    "parent": null,
    "verify_required": true,
    "step_success_required": true,
    "steps": [
      {
        "ProcedureGroup": {
          "name": "tmo-beamline-vacuum-active-before-pump-down",
          "description": null,
          "parent": null,
          "verify_required": false,
          "step_success_required": true,
          "steps": [
            {
              "SetValueStep": {
                "name": "close VFV valves",
                "description": null,
                "parent": null,
                "verify_required": false,
                "step_success_required": true,
                "actions": [
                  {
                    "name": "VFV 02",
                    "device": null,
                    "attr": null,
                    "pv": "TMO:ROUGH1:VFV:02:STATE",
                    "value": 0,
                    "timeout": null,
                    "settle_time": null
                  },
                  {
                    "name": "VFV 03",
                    "device": null,
                    "attr": null,
                    "pv": "TMO:ROUGH1:VFV:03:STATE",
                    "value": 0,
                    "timeout": null,
                    "settle_time": null
                  },
                  {
                    "name": "VFV 01",
                    "device": null,
                    "attr": null,
                    "pv": "TMO:ROUGH1:VFV:01:STATE",
                    "value": 0,
                    "timeout": null,
                    "settle_time": null
                  }
                ],
                "success_criteria": [
                  {
                    "name": null,
                    "device": null,
                    "attr": null,
                    "pv": "TMO:ROUGH1:VFV:02:STATE_RBV",
                    "comparison": {
                      "Equals": {
                        "name": "untitled",
                        "description": null,
                        "invert": false,
                        "reduce_period": null,
                        "reduce_method": "average",
                        "string": null,
                        "severity_on_failure": 2,
                        "if_disconnected": 2,
                        "value_dynamic": null,
                        "value": 0.0,
                        "rtol": null,
                        "atol": null
                      }
                    }
                  },
                  {
                    "name": null,
                    "device": null,
                    "attr": null,
                    "pv": "TMO:ROUGH1:VFV:03:STATE_RBV",
                    "comparison": {
                      "Equals": {
                        "name": "untitled",
                        "description": null,
                        "invert": false,
                        "reduce_period": null,
                        "reduce_method": "average",
                        "string": null,
                        "severity_on_failure": 2,
                        "if_disconnected": 2,
                        "value_dynamic": null,
                        "value": 0.0,
                        "rtol": null,
                        "atol": null
                      }
                    }
                  },
                  {
                    "name": null,
                    "device": null,
                    "attr": null,
                    "pv": "TMO:ROUGH1:VFV:03:STATE_RBV",
                    "comparison": {
                      "Equals": {
                        "name": "untitled",
                        "description": null,
                        "invert": false,
                        "reduce_period": null,
                        "reduce_method": "average",
                        "string": null,
                        "severity_on_failure": 2,
                        "if_disconnected": 2,
                        "value_dynamic": null,
                        "value": 0.0,
                        "rtol": null,
                        "atol": null
                      }
                    }
                  }
                ],
                "halt_on_fail": true,
                "require_action_success": true
              }
            },
            {
              "SetValueStep": {
                "name": "close 5 beam valves",
                "description": null,
                "parent": null,
                "verify_required": false,
                "step_success_required": true,
                "actions": [
                  {
                    "name": "MR2K4",
                    "device": null,
                    "attr": null,
                    "pv": "MR2K4:KBO:VWC:01:OPN_SW",
                    "value": 0,
                    "timeout": null,
                    "settle_time": null
                  },
                  {
                    "name": "MR3K4",
                    "device": null,
                    "attr": null,
                    "pv": "MR3K4:KBO:VWC:01:OPN_SW",
                    "value": 0,
                    "timeout": null,
                    "settle_time": null
                  },
                  {
                    "name": "LI3K4",
                    "device": null,
                    "attr": null,
                    "pv": "LI3K4:IP1:VWC:01:OPN_SW",
                    "value": 0,
                    "timeout": null,
                    "settle_time": null
                  },
                  {
                    "name": "PC5K4",
                    "device": null,
                    "attr": null,
                    "pv": "PC5K4:VWC:01:OPN_SW",
                    "value": 0,
                    "timeout": null,
                    "settle_time": null
                  },
                  {
                    "name": "MR4K4",
                    "device": null,
                    "attr": null,
                    "pv": "MR4K4:KBO:VWC:01:OPN_SW",
                    "value": 0,
                    "timeout": null,
                    "settle_time": null
                  }
                ],
                "success_criteria": [
                  {
                    "name": null,
                    "device": null,
                    "attr": null,
                    "pv": "MR2K4:KBO:VWC:01:POS_STATE_RBV",
                    "comparison": {
                      "Equals": {
                        "name": "MR2K4",
                        "description": null,
                        "invert": false,
                        "reduce_period": null,
                        "reduce_method": "average",
                        "string": null,
                        "severity_on_failure": 2,
                        "if_disconnected": 2,
                        "value_dynamic": null,
                        "value": "CLOSED",
                        "rtol": null,
                        "atol": null
                      }
                    }
                  },
                  {
                    "name": null,
                    "device": null,
                    "attr": null,
                    "pv": "MR3K4:KBO:VWC:01:POS_STATE_RBV",
                    "comparison": {
                      "Equals": {
                        "name": "MR3K4",
                        "description": null,
                        "invert": false,
                        "reduce_period": null,
                        "reduce_method": "average",
                        "string": null,
                        "severity_on_failure": 2,
                        "if_disconnected": 2,
                        "value_dynamic": null,
                        "value": "CLOSED",
                        "rtol": null,
                        "atol": null
                      }
                    }
                  },
                  {
                    "name": null,
                    "device": null,
                    "attr": null,
                    "pv": "LI3K4:IP1:VWC:01:POS_STATE_RBV",
                    "comparison": {
                      "Equals": {
                        "name": "LI3K4",
                        "description": null,
                        "invert": false,
                        "reduce_period": null,
                        "reduce_method": "average",
                        "string": null,
                        "severity_on_failure": 2,
                        "if_disconnected": 2,
                        "value_dynamic": null,
                        "value": "CLOSED",
                        "rtol": null,
                        "atol": null
                      }
                    }
                  },
                  {
                    "name": null,
                    "device": null,
                    "attr": null,
                    "pv": "PC5K4:VWC:01:POS_STATE_RBV",
                    "comparison": {
                      "Equals": {
                        "name": "PC5K4",
                        "description": null,
                        "invert": false,
                        "reduce_period": null,
                        "reduce_method": "average",
                        "string": null,
                        "severity_on_failure": 2,
                        "if_disconnected": 2,
                        "value_dynamic": null,
                        "value": "CLOSED",
                        "rtol": null,
                        "atol": null
                      }
                    }
                  },
                  {
                    "name": null,
                    "device": null,
                    "attr": null,
                    "pv": "MR4K4:KBO:VWC:01:POS_STATE_RBV",
                    "comparison": {
                      "Equals": {
                        "name": "MR4K4",
                        "description": null,
                        "invert": false,
                        "reduce_period": null,
                        "reduce_method": "average",
                        "string": null,
                        "severity_on_failure": 2,
                        "if_disconnected": 2,
                        "value_dynamic": null,
                        "value": "CLOSED",
                        "rtol": null,
                        "atol": null
                      }
                    }
                  }
                ],
                "halt_on_fail": true,
                "require_action_success": true
              }
            },
            {
              "ProcedureGroup": {
                "name": "beamline valves",
                "description": null,
                "parent": null,
                "verify_required": false,
                "step_success_required": true,
                "steps": [
                  {
                    "SetValueStep": {
                      "name": "vrc01",
                      "description": null,
                      "parent": null,
                      "verify_required": false,
                      "step_success_required": true,
                      "actions": [
                        {
                          "name": "sp",
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:01:AT_VAC_SP",
                          "value": 800.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": "hys",
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:01:AT_VAC_HYS",
                          "value": 800.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": "sp ds",
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:01:AT_VAC_SP_DS",
                          "value": 800.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": "hys ds",
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:01:AT_VAC_HYS_DS",
                          "value": 800.0,
                          "timeout": null,
                          "settle_time": null
                        }
                      ],
                      "success_criteria": [
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:01:AT_VAC_SP_RBV",
                          "comparison": {
                            "Equals": {
                              "name": "sp us",
                              "description": null,
                              "invert": false,
                              "reduce_period": null,
                              "reduce_method": "average",
                              "string": null,
                              "severity_on_failure": 2,
                              "if_disconnected": 2,
                              "value_dynamic": null,
                              "value": 800.0,
                              "rtol": null,
                              "atol": null
                            }
                          }
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:01:AT_VAC_HYS_RBV",
                          "comparison": {
                            "Equals": {
                              "name": "hys us",
                              "description": null,
                              "invert": false,
                              "reduce_period": null,
                              "reduce_method": "average",
                              "string": null,
                              "severity_on_failure": 2,
                              "if_disconnected": 2,
                              "value_dynamic": null,
                              "value": 800.0,
                              "rtol": null,
                              "atol": null
                            }
                          }
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:01:AT_VAC_SP_DS_RBV",
                          "comparison": {
                            "Equals": {
                              "name": "sp ds",
                              "description": null,
                              "invert": false,
                              "reduce_period": null,
                              "reduce_method": "average",
                              "string": null,
                              "severity_on_failure": 2,
                              "if_disconnected": 2,
                              "value_dynamic": null,
                              "value": 800.0,
                              "rtol": null,
                              "atol": null
                            }
                          }
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:01:AT_VAC_HYS_DS_RBV",
                          "comparison": {
                            "Equals": {
                              "name": "hys ds",
                              "description": null,
                              "invert": false,
                              "reduce_period": null,
                              "reduce_method": "average",
                              "string": null,
                              "severity_on_failure": 2,
                              "if_disconnected": 2,
                              "value_dynamic": null,
                              "value": 800.0,
                              "rtol": null,
                              "atol": null
                            }
                          }
                        }
                      ],
                      "halt_on_fail": true,
                      "require_action_success": true
                    }
                  },
                  {
                    "SetValueStep": {
                      "name": "vrc02",
                      "description": null,
                      "parent": null,
                      "verify_required": false,
                      "step_success_required": true,
                      "actions": [
                        {
                          "name": "sp us",
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:02:AT_VAC_SP",
                          "value": 800.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": "hys us",
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:02:AT_VAC_HYS",
                          "value": 800.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": "sp ds",
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:02:AT_VAC_SP_DS",
                          "value": 800.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": "hys ds",
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:02:AT_VAC_HYS_DS",
                          "value": 800.0,
                          "timeout": null,
                          "settle_time": null
                        }
                      ],
                      "success_criteria": [
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:02:AT_VAC_SP_RBV",
                          "comparison": {
                            "Equals": {
                              "name": "sp us",
                              "description": null,
                              "invert": false,
                              "reduce_period": null,
                              "reduce_method": "average",
                              "string": null,
                              "severity_on_failure": 2,
                              "if_disconnected": 2,
                              "value_dynamic": null,
                              "value": 800.0,
                              "rtol": null,
                              "atol": null
                            }
                          }
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:02:AT_VAC_HYS_RBV",
                          "comparison": {
                            "Equals": {
                              "name": "hys us",
                              "description": null,
                              "invert": false,
                              "reduce_period": null,
                              "reduce_method": "average",
                              "string": null,
                              "severity_on_failure": 2,
                              "if_disconnected": 2,
                              "value_dynamic": null,
                              "value": 800.0,
                              "rtol": null,
                              "atol": null
                            }
                          }
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:02:AT_VAC_SP_DS_RBV",
                          "comparison": {
                            "Equals": {
                              "name": "sp ds",
                              "description": null,
                              "invert": false,
                              "reduce_period": null,
                              "reduce_method": "average",
                              "string": null,
                              "severity_on_failure": 2,
                              "if_disconnected": 2,
                              "value_dynamic": null,
                              "value": 800.0,
                              "rtol": null,
                              "atol": null
                            }
                          }
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "TMO:ROUGH1:VRC:02:AT_VAC_HYS_DS_RBV",
                          "comparison": {
                            "Equals": {
                              "name": "hys ds",
                              "description": null,
                              "invert": false,
                              "reduce_period": null,
                              "reduce_method": "average",
                              "string": null,
                              "severity_on_failure": 2,
                              "if_disconnected": 2,
                              "value_dynamic": null,
                              "value": 800.0,
                              "rtol": null,
                              "atol": null
                            }
                          }
                        }
                      ],
                      "halt_on_fail": true,
                      "require_action_success": true
                    }
                  }
                ]
              }
            },
            {
              "ProcedureGroup": {
                "name": "beamline valves",
                "description": null,
                "parent": null,
                "verify_required": false,
                "step_success_required": true,
                "steps": [
                  {
                    "SetValueStep": {
                      "name": null,
                      "description": null,
                      "parent": null,
                      "verify_required": true,
                      "step_success_required": true,
                      "actions": [
                        {
                          "name": "pa1k4 01 sp",
                          "device": null,
                          "attr": null,
                          "pv": "PA1K4:IP1:PTM:01:IP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": "pa1k4 01 bp",
                          "device": null,
                          "attr": null,
                          "pv": "PA1K4:IP1:PTM:01:BP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": "pa1k4 02 sp",
                          "device": null,
                          "attr": null,
                          "pv": "PA1K4:IP1:PTM:02:IP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": "pa1k4 02 bp",
                          "device": null,
                          "attr": null,
                          "pv": "PA1K4:IP1:PTM:02:IP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": "pa1k4 03 sp",
                          "device": null,
                          "attr": null,
                          "pv": "PA1K4:IP1:PTM:03:BP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": "pa1k4 03 bp",
                          "device": null,
                          "attr": null,
                          "pv": "PA1K4:IP1:PTM:03:IP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "IM4K4:PPM:PTM:01:BP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "IM4K4:PPM:PTM:01:IP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "LI3K4:IP1:OUT:PTM:01:BP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "LI3K4:IP1:OUT:PTM:01:IP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "TM1K4:PTM:01:BP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "TM1K4:PTM:01:IP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "IM5K4:PPM:PTM:01:BP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "IM5K4:PPM:PTM:01:IP_SP",
                          "value": 5.0,
                          "timeout": null,
                          "settle_time": null
                        }
                      ],
                      "success_criteria": [
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "PA1K4:IP1:PTM:01:BP_SP",
                          "comparison": {
                            "Equals": {
                              "name": "untitled",
                              "description": null,
                              "invert": false,
                              "reduce_period": null,
                              "reduce_method": "average",
                              "string": null,
                              "severity_on_failure": 2,
                              "if_disconnected": 2,
                              "value_dynamic": null,
                              "value": 5.0,
                              "rtol": null,
                              "atol": null
                            }
                          }
                        },
                        {
                          "name": null,
                          "device": null,
                          "attr": null,
                          "pv": "PA1K4:IP1:PTM:01:IP_SP",
                          "comparison": {
                            "Equals": {
                              "name": "untitled",
                              "description": null,
                              "invert": false,
                              "reduce_period": null,
                              "reduce_method": "average",
                              "string": null,
                              "severity_on_failure": 2,
                              "if_disconnected": 2,
                              "value_dynamic": null,
                              "value": 5.0,
                              "rtol": null,
                              "atol": null
                            }
                          }
                        },
                        {
                          "name": "untitled_check",
                          "device": null,
                          "attr": null,
                          "pv": null,
                          "comparison": {
                            "Equals": {
                              "name": "untitled",
                              "description": null,
                              "invert": false,
                              "reduce_period": null,
                              "reduce_method": "average",
                              "string": null,
                              "severity_on_failure": 2,
                              "if_disconnected": 2,
                              "value_dynamic": null,
                              "value": 0.0,
                              "rtol": null,
                              "atol": null
                            }
                          }
                        }
                      ],
                      "halt_on_fail": true,
                      "require_action_success": true
                    }
                  }
                ]
              }
            }
          ]
        }
      }
    ]
  }
}
